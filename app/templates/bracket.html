{% extends "base.html" %}
{% block content %}
<h2 class="mb-4">Tournament Bracket</h2>

<style>
	.bracket-grid {
		display: grid;
		grid-auto-flow: column;
		grid-auto-columns: 220px;
		grid-auto-rows: 40px;
		column-gap: 30px;
		row-gap: 10px;
		position: relative;
	}

	.match-box {
		background: white;
		border: 1px solid #ccc;
		border-radius: 6px;
		padding: 10px;
		text-align: center;
		box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
	}

	.match-box .vs {
		color: #888;
		font-size: 0.9rem;
		margin: 5px 0;
	}
</style>

<div class="bracket-grid">
	{% for match in bracket.all_matches %}
	<div class="match-box"
	     style="grid-column: {{ match.x + 1 }};
	            grid-row: {{ match.y|round + 1 }};">
		<div>
			{% if match.player1 %}
				<img src="{{ url_for('static', filename='avatars/' ~ match.player1.avatar_filename) }}" width="40" class="rounded-circle">
				<div><strong>{{ match.player1.name }}</strong></div>
			{% else %}
				<em>Bye</em>
			{% endif %}
		</div>
		<div class="vs">vs</div>
		<div>
			{% if match.player2 %}
				<img src="{{ url_for('static', filename='avatars/' ~ match.player2.avatar_filename) }}" width="40" class="rounded-circle">
				<div><strong>{{ match.player2.name }}</strong></div>
			{% else %}
				<em>Bye</em>
			{% endif %}
		</div>
	</div>
	{% endfor %}
</div>
{% endblock %}