{% extends "base.html" %}
{% block content %}
<h2 class="mb-4">Tournament Bracket</h2>

<style>
	.bracket-grid {
		display: grid;
		grid-auto-flow: column;
		grid-auto-columns: 220px;
		grid-auto-rows: 10px; /* Fine granularity */
		column-gap: 30px;
		row-gap: 0;
		position: relative;
	}

	.match-box {
		width: 200px;
		height: 120px;
		background: white;
		border: 1px solid #ccc;
		border-radius: 6px;
		padding: 10px;
		text-align: center;
		box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
		display: flex;
		flex-direction: column;
		justify-content: center;
		align-items: center;
		gap: 5px;
	}

	.match-box .vs {
		color: #888;
		font-size: 0.9rem;
		margin: 4px 0;
	}
</style>

<div class="bracket-grid">
	{% for match in bracket.all_matches %}
	<div class="match-box"
	     style="grid-column: {{ match.x + 1 }};
	            grid-row-start: {{ (match.y * 4)|int + 1 }};
	            grid-row-end: span 12;">
		<div class="text-center">
			{% if match.player1 %}
				<img src="{{ url_for('static', filename='avatars/' ~ match.player1.avatar_filename) }}" width="40" class="rounded-circle mb-1">
				<div><strong>{{ match.player1.name }}</strong></div>
			{% else %}
				<img src="{{ url_for('static', filename='avatars/default.png') }}" width="40" class="rounded-circle opacity-50 mb-1">
				<div><em>TBD</em></div>
			{% endif %}
		</div>
		<div class="vs">vs</div>
		<div class="text-center">
			{% if match.player2 %}
				<img src="{{ url_for('static', filename='avatars/' ~ match.player2.avatar_filename) }}" width="40" class="rounded-circle mb-1">
				<div><strong>{{ match.player2.name }}</strong></div>
			{% else %}
				<img src="{{ url_for('static', filename='avatars/default.png') }}" width="40" class="rounded-circle opacity-50 mb-1">
				<div><em>TBD</em></div>
			{% endif %}
		</div>
	</div>
	{% endfor %}
</div>
{% endblock %}